% document options
\newcommand{\myTitle}{Title1 Title2}
\newcommand{\myTitleOnTitlePageLineOne}{Title1}
\newcommand{\myTitleOnTitlePageLineTwo}{Title2}
\newcommand{\myName}{Eduard Sz\"{o}cs}
\newcommand{\myUni}{\protect{Universität Koblenz-Landau}}
\newcommand{\myLocation}{Z\v{a}rnesti / Romania}
\newcommand{\myTime}{\today}

% list all packages
% \listfiles

% use ragged bottom (=no vertical stretch of paragraphs (=\flushbottom))
\raggedbottom


% character encoding and languages
\usepackage[american]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{textcomp}
\usepackage{microtype}

% knitr look-a-like and environment
\usepackage[dvipsnames]{xcolor}
\usepackage{framed}
\usepackage{alltt}

\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\definecolor{fgcolor}{rgb}{0.345, 0.345, 0.345}
\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
\newcommand{\hlnum}[1]{\textcolor[rgb]{0.686,0.059,0.569}{#1}}%
\newcommand{\hlstr}[1]{\textcolor[rgb]{0.192,0.494,0.8}{#1}}%
\newcommand{\hlcom}[1]{\textcolor[rgb]{0.678,0.584,0.686}{\textit{#1}}}%
\newcommand{\hlopt}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlstd}[1]{\textcolor[rgb]{0.345,0.345,0.345}{#1}}%
\newcommand{\hlkwa}[1]{\textcolor[rgb]{0.161,0.373,0.58}{\textbf{#1}}}%
\newcommand{\hlkwb}[1]{\textcolor[rgb]{0.69,0.353,0.396}{#1}}%
\newcommand{\hlkwc}[1]{\textcolor[rgb]{0.333,0.667,0.333}{#1}}%
\newcommand{\hlkwd}[1]{\textcolor[rgb]{0.737,0.353,0.396}{\textbf{#1}}}%

\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\newenvironment{knitrout}{}{} % an empty environment to be redefined in TeX



% math packages
\usepackage{amsmath}


% thesis style
\usepackage[%
%    drafting,
%    minionpro,
    % minionprospacing,
    beramono,
    eulermath,
    pdfspacing,
    eulerchapternumbers,
    dottedtoc,
    floatperchapter,
    parts,
    linedheaders, %  changes  the  look  of  the  chapter  headings  a  bit by adding a horizontal line above the chapter title. 
]{classicthesis}


% % define page size and margins for the final print
\usepackage{geometry}
\geometry{left = 3.5cm,
    right = 2.5cm,
    top = 2.5cm,
    bottom = 2.5cm}
% \geometry{paperwidth=18.91cm,
% 	paperheight=24.589cm,
% 	bindingoffset=0.89cm, % gutter
% 	inner=2cm, % inside margin
% 	outer=4cm, % outside margin
% 	vmargin=2.5cm, % top and bottom margins
% 	marginparsep=0.6cm,
% 	marginparwidth=3cm,
% }

% tables
\usepackage{tabularx}
\usepackage{longtable}
% to automate this solution for the longtable, as it was large, with many such box issues. The solution I propose here is to define a new column type (I call it P) which invokes \raggedright and other stuff necessary to handle all columns.
% this fixeś underfull hboxes in longtable
\usepackage{array}
\newcolumntype{P}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}p{#1}}

% fixes for marginpar and latex
\usepackage{mparhack}
\usepackage{fixltx2e} 

% % indexing
% \usepackage{makeidx}
% \makeindex

% graphics, figures, captions
\usepackage{graphicx}
% \usepackage{tikz}
% \usepackage{pgfplots}
% \pgfplotsset{compat=newest}
% \usetikzlibrary{external}
% \usetikzlibrary{calc}
% \usepackage{tkz-gm} % graphical models
% \usepackage{caption}
% \usepackage{subcaption}
% \tikzexternalize
% \tikzsetexternalprefix{externalized/}

% insert pdfs
\usepackage{pdfpages}

% floats 
\usepackage{placeins}
% It gives you a \FloatBarrier command that you can use to prevent floats to appear beyond some point in your document. Use it as
% \FloatBarrier
% \section{My new section} % will not include floats from previous sections

% bibliography
\usepackage{csquotes}
\usepackage[%
    backend=biber, 
    refsection=chapter,
    natbib=true,
    style=authoryear,%
    dashed=false,%
    doi=false,%
    isbn=false,%
    hyperref=auto,%
    % backref,%
    % backrefstyle=three,%
    maxbibnames=99,%
    maxcitenames=3,
]{biblatex}
% Change Bibliograpgy to "References"
\DefineBibliographyStrings{english}{%
  bibliography = {References},
}
% add bib files
\addbibresource[label=publications]{frontbackmatter/publications.bib}
\addbibresource[label=usetheglm]{chapters/usetheglm/refs_usetheglm.bib}
\addbibresource[label=taxize]{chapters/taxize/refs_taxize.bib}



% dummy counter for correct TOC etc
\newcounter{dummy}


% signature function
\newcommand{\signature}[1]{%
  \vspace{4em}
  \parbox{0.9\textwidth}{
    Neustadt a.d. Weinstraße, \\
    \today 

    \hfill 
    \parbox{4cm}{
      \centering
      \rule{4cm}{1pt}\\
       #1 
    }
  }
}


% hyperref
\usepackage{hyperref}
\hypersetup{%
    %draft, % = no hyperlinking at all (useful in b/w printouts)
    colorlinks=true, 
    linktocpage=true, 
    pdfstartpage=1, 
    pdfstartview=FitV,%
    % uncomment the following line if you want to have black links (e.g., for printing)
    %colorlinks=false, linktocpage=false, pdfborder={0 0 0}, pdfstartpage=1, pdfstartview=FitV,% 
    breaklinks=true, 
    pdfpagemode=UseNone, 
    pageanchor=true, 
    pdfpagemode=UseOutlines,%
    plainpages=false, 
    bookmarksnumbered, 
    bookmarksopen=true, 
    bookmarksopenlevel=1,%
    hypertexnames=true, 
    pdfhighlight=/O,%hyperfootnotes=true,%nesting=true,%frenchlinks,%
    urlcolor=webbrown, linkcolor=RoyalBlue, citecolor=webgreen, %pagecolor=RoyalBlue,%
    %urlcolor=Black, linkcolor=Black, citecolor=Black, %pagecolor=Black,%
    pdftitle={\myTitle},%
    pdfauthor={\myName, \myUni},%
    pdfsubject={},%
    pdfkeywords={},%
}   
\renewcommand{\subsectionautorefname}{Subsection}
\renewcommand{\sectionautorefname}{Section}
\renewcommand{\chapterautorefname}{Chapter}


% % Bold small caps for chapters in toc
